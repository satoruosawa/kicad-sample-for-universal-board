# PチャネルFETのスイッチ回路2
- Vinのロジック回路電圧が、FETのゲート電圧に届かないときなどに、トランジスタで電圧を増幅している例。

### 計算
- 例1
  - DC Forward Current(標準電流): 30mA, Vf: 3.1V(Vfmax:3.6V)の高輝度LED(OSR5JA3Z74A)の場合
  - Vcc: 12V
  - 2SJ334
    - Vdss: -60V < -12V OK
    - Id: -30A < -30mA OK
    - Vth: -0.8V ~ -2.0V < -(12V - Vt) となるようにVtを設定する。
    - 4V駆動 OK
  - まずはトランジスタ
    - 2SC1815GR
    - 2SA1815GRはhfe: 300, ベースエミッタ間飽和電圧Vbe(sat): 1V, Ic(max) = 150mA
    - Vin 5V のとき、-(12V - Vt) < Vth となるようにする。
    - <=> Vt - 12V < -2V
    - <=> 12V - Vt > 2V
    - <=> I2 > 2V / R2
    - <=> I1 * 300 > 2V / R2
    - <=> (5V - 1V)  / R1 * 300 > 2V / R2
    - <=> R2 / R1 > 2V / (4V * 300) = 0.00167
    - 電流は小さい方が省エネ。なので、R2 = 10kΩとすると、R1 < 10kΩ / 0.00167 = 6.0MΩ
    - **かなり自由度があるので、以下のように決定する**
      - Ic - Vce 特性から、十分なIcが得られそうなIbのうち、最小（少なめ）のものを選ぶ。Ib = 0.5mAとする。
      - R1 = 10kΩ
      - R2がよっぽど小さくない限り、Icは振り切れて、Vo1 = 0Vとなる。
      - I2 < 300 * I1
      - <=> 12V / R2 < 300 * (5V - 1V) / R1
      - <=> 12V / R2 < 300 * 4V / 10kΩ
      - <=> 12V / R2 < 120mA
      - <=> R2 > 100Ω
      - ある程度省エネにもしておきたいので、同じ10kΩにしておく。
  - FET
    - Vcc: 12Vなので、
    - R2 = (12V - 3.1V) / 30mA = 297Ω
    - R2を330Ωとすると最大8.9V * 8.9V / 330Ω = 240mWとなる。R2は100Ω 1/2Wカーボン抵抗などを使う。

### 検討項目
- duty0%と1%で挙動が不連続。トランジスタ単体だと、この特性は出ないので、おそらく、FETの影響か。(FET単体でもこの挙動が再現)
